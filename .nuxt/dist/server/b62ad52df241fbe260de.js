exports.ids=[18],exports.modules={167:function(e,r,t){"use strict";t.r(r);var o={data:()=>({errors:{}}),methods:{validateEmail(e){const r=e.target.name,t=e.target.value;return t?this.checkEmailName(t)?(this.errors.hasOwnProperty(r)&&delete this.errors[r],!0):(this.errors[r]=this.$t("errors.form.unvalid-email-name"),!1):(this.errors[r]=this.$t("errors.form.required-field"),!1)},validatePassword(e){const r=e.target.name;return e.target.value?(this.errors.hasOwnProperty(r)&&delete this.errors[r],!0):(this.errors[r]=this.$t("errors.form.required-field"),!1)},validateConfirmPassword(e,r){const t=e.target.name,o=e.target.value,n=r.name,d=r.value;return o?this.checkStringEqual(o,d)?(this.errors.hasOwnProperty(t)&&delete this.errors[t],this.errors.hasOwnProperty(n)&&delete this.errors[n],!0):(this.errors[t]=this.$t("errors.form.passwords-not-equal"),!1):(this.errors[t]=this.$t("errors.form.required-field"),!1)},validatePhone(e){const r=e.name;return e.isValid?(this.errors.hasOwnProperty(r)&&delete this.errors[r],!0):(this.errors[r]=this.$t("errors.form.invalid-number"),!1)},validateAccept(e,r){const t=e.target.name;return r?(this.errors.hasOwnProperty(t)&&delete this.errors[t],!0):(this.errors[t]=this.$t("errors.form.required-field"),!1)},validateFilePDF(e){const r=e.target.name,t=e.target.files[0].type,o=e.target.files[0].size/1024/1024;return this.checkFileTypePDF(t)?this.checkFileSize(o)?(this.errors.hasOwnProperty(r)&&delete this.errors[r],!0):(this.errors[r]="File size is too large.",!1):(this.errors[r]="Invalid type. Must be PDF.",!1)},validateFileImage(e){const r=e.target.name,t=e.target.files[0].type,o=e.target.files[0].size/1024/1024;return this.checkFileTypeImage(t)?this.checkFileSize(o)?(this.errors.hasOwnProperty(r)&&delete this.errors[r],!0):(this.errors[r]="File size is too large.",!1):(this.errors[r]="Invalid type. Must be Image.",!1)},checkEmailName:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),checkStringEqual:(e,r)=>e===r,checkFileTypeImage:e=>(["image/png","image/jpeg"].forEach(element=>{if(element===e)return!0}),!1),checkFileTypePDF:e=>(["application/pdf"].forEach(element=>{if(element===e)return!0}),!1),checkFileSize:e=>e<50}},n={mixins:[o],data:()=>({models:{email:"",password:""}}),methods:{onSubmit(){if(!this.validateForm(this.models))return this.$root.$emit("showNotify",{type:"error",text:"Форма не прошла предварительную валидацию."}),!1;const e=this.prepareDataForSending(this.models);this.$store.dispatch("user/LOGIN_USER",e).then(e=>{this.$store.dispatch("user/LOAD_USER",{id:e.data.doctor_id,token:e.data.access_token})})},async validateForm(e){return e.email?e.password?!!this.recaptchaToken||(this.$root.$emit("showNotify",{type:"error",text:"Рекаптча ТОКЕН не обнаружен. Невозможно отправить форму."}),!1):(this.errors.password=this.$t("errors.form.required-field"),this.$forceUpdate(),!1):(this.errors.email=this.$t("errors.form.required-field"),this.$forceUpdate(),!1)},prepareDataForSending(e){let r=new FormData;return r.append("email",e.email),r.append("password",e.password),r.append("recaptcha",this.recaptchaToken),r},onEmailChange(e){this.validateEmail(e),this.$forceUpdate()},onPasswordChange(e){this.validatePassword(e),this.$forceUpdate()}}},d=t(1),c=Object(d.a)(n,(function(){var e=this,r=e.$createElement;return(e._self._c||r)("form",{staticClass:"form",attrs:{action:"",method:"POST"},on:{submit:function(r){return r.preventDefault(),e.onSubmit(r)}}},[e._ssrNode('<div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.enter-email")))+'</div> <input type="email" name="email"'+e._ssrAttr("value",e.models.email)+' class="input"> '+(e.errors.email?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.email))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.enter-password")))+'</div> <input type="password" name="password"'+e._ssrAttr("value",e.models.password)+' class="input"> '+(e.errors.password?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.password))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><button type="submit" class="link link--button link--button-blue">'+e._ssrEscape(e._s(e.$t("links.signin")))+"</button></div>")])}),[],!1,null,null,"3f3a3ea2").exports,l={mixins:[o,t(35).a],created(){0},data:()=>({models:{email:"",password:"",password_confirmation:"",phone_number:"",degree:"",certification:"",accepted:!1},isFormSending:!1}),methods:{async onSubmit(){if(this.isFormSending=!0,!this.validateForm(this.models))return this.$root.$emit("showNotify",{type:"error",text:"Форма не прошла предварительную валидацию."}),this.isFormSending=!1,!1;const e=this.prepareDataForSending(this.models);this.$store.dispatch("user/REGISTER_USER",e).then(e=>{this.$store.dispatch("user/LOAD_USER",{id:e.data.doctor_id,token:e.data.access_token}).then(e=>{this.$modal.show("register-success"),this.loadAndSetRecaptchaToken(this.$recaptchaActions.registerDoctor),this.isFormSending=!1})}).catch(e=>{this.handleErrorResponse(e.errors),this.loadAndSetRecaptchaToken(this.$recaptchaActions.registerDoctor),this.isFormSending=!1})},validateForm(e){return e.email?e.password?e.password_confirmation?e.phone_number?e.accepted?!!this.recaptchaToken||(this.$root.$emit("showNotify",{type:"error",text:"Рекаптча ТОКЕН не обнаружен. Невозможно отправить форму."}),!1):(this.errors.accepted=this.$t("errors.form.required-field"),this.$forceUpdate(),!1):(this.errors.phone_number=this.$t("errors.form.required-field"),this.$forceUpdate(),!1):(this.errors.password_confirmation=this.$t("errors.form.required-field"),this.$forceUpdate(),!1):(this.errors.password=this.$t("errors.form.required-field"),this.$forceUpdate(),!1):(this.errors.email=this.$t("errors.form.required-field"),this.$forceUpdate(),!1)},handleErrorResponse(e){for(let r in e)this.errors[r]=e[r][0];this.$forceUpdate()},prepareDataForSending(e){let r=new FormData;return r.append("email",e.email),r.append("phone_number",e.phone_number),r.append("password",e.password),r.append("password_confirmation",e.password_confirmation),r.append("accepted",e.accepted),e.degree&&r.append("medical_degree",e.degree),e.certification&&r.append("medical_degree",e.certification),r.append("recaptcha",this.recaptchaToken),r},addFileDegree(){this.$refs.degree.click()},addFileCertification(){this.$refs.certification.click()},onEmailChange(e){this.validateEmail(e),this.$forceUpdate()},onPasswordChange(e){this.validateConfirmPassword(e,this.$refs.password_confirmation),this.$forceUpdate()},onConfirmPasswordChange(e){this.validateConfirmPassword(e,this.$refs.password),this.$forceUpdate()},onPhoneChange(e,r){this.validatePhone(r)},onDegreeUpload(e){this.validateFilePDF(e)&&(this.models.degree=e.target.files[0])},onCertificationUpload(e){this.validateFilePDF(e)&&(this.models.certification=e.target.files[0])},onAcceptChange(e){this.validateAccept(e,this.models.accepted)}}},m=Object(d.a)(l,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("form",{staticClass:"form",attrs:{action:"",method:"POST"},on:{submit:function(r){return r.preventDefault(),e.onSubmit(r)}}},[e._ssrNode('<div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.enter-email")))+'</div> <input type="email" name="email"'+e._ssrAttr("value",e.models.email)+' class="input"> '+(e.errors.email?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.email))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.create-password")))+'</div> <input type="text" name="password"'+e._ssrAttr("value",e.models.password)+' class="input"> '+(e.errors.password?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.password))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.confirm-password")))+'</div> <input type="text" name="password_confirmation"'+e._ssrAttr("value",e.models.password_confirmation)+' class="input"> '+(e.errors.password_confirmation?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.password_confirmation))+"</div>":"\x3c!----\x3e")+"</div> "),e._ssrNode('<div class="form__item">',"</div>",[e._ssrNode('<div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.phone-number")))+"</div> "),t("vue-tel-input",{attrs:{name:"phone_number"},on:{input:e.onPhoneChange},model:{value:e.models.phone_number,callback:function(r){e.$set(e.models,"phone_number",r)},expression:"models.phone_number"}}),e._ssrNode(" "+(e.errors.phone_number?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.phone_number))+"</div>":"\x3c!----\x3e"))],2),e._ssrNode(' <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.upload-degree")))+'</div> <input type="file" name="degree" class="input input--hidden"> <button type="button" class="link link--button link--button-white">Add Degree</button> '+(e.errors.degree?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.degree))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.upload-certification")))+'</div> <input type="file" name="certification" class="input input--hidden"> <button type="button" class="link link--button link--button-white">Add Certification</button> '+(e.errors.certification?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.certification))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><div class="form__title">'+e._ssrEscape(e._s(e.$t("forms.i-accept")))+'</div> <input type="checkbox" name="accepted"'+e._ssrAttr("checked",Array.isArray(e.models.accepted)?e._i(e.models.accepted,null)>-1:e.models.accepted)+"> "+(e.errors.accepted?'<div class="form__message">'+e._ssrEscape(e._s(e.errors.accepted))+"</div>":"\x3c!----\x3e")+'</div> <div class="form__item"><button type="submit"'+e._ssrAttr("disabled",e.isFormSending)+' class="link link--button link--button-blue">'+e._ssrEscape(e._s(e.isFormSending?"loading...":e.$t("links.signup")))+"</button></div>")],2)}),[],!1,null,null,"49972bd0").exports;var h={beforeCreate(){setTimeout(()=>{this.$store.dispatch("user/AUTOLOGIN_USER",{token:this.$store.getters["user/TOKEN"],user:this.$store.getters["user/USER"]})},0)},data:()=>({currentTab:"signin"}),methods:{setCurrentTab(e){this.currentTab=e}},components:{SigninForm:c,SignupForm:m}},_=Object(d.a)(h,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"page"},[e._ssrNode('<div class="section">',"</div>",[e._ssrNode('<div class="container">',"</div>",[e._ssrNode('<button class="link link--button link--button-white">Sign In</button> <button class="link link--button link--button-white">Sign Up</button> '),"signin"===e.currentTab?[t("SigninForm")]:e._e(),e._ssrNode(" "),"signup"===e.currentTab?[t("SignupForm")]:e._e(),e._ssrNode(" <button>Forgot Password?</button>")],2)])])}),[],!1,null,null,"310bc2b9");r.default=_.exports}};
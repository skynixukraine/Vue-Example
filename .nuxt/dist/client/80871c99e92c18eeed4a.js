(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{324:function(e,t,r){"use strict";r.r(t);r(23),r(16),r(43);var n={mounted:function(){var e=this;setTimeout((function(){e.onVerifyEmail()}),0)},data:function(){return{message:""}},methods:{validateQueryData:function(e){return!!(e.hasOwnProperty("expires")&&e.hasOwnProperty("id")&&e.hasOwnProperty("signature"))||(this.message="Invalid vefiry data for sending.",!1)},validateCurrentUser:function(e,t,r){return Object.keys(e).length&&t.access_token?parseInt(t.doctor_id)===parseInt(r.id)||(this.message="Inappropriate user.",!1):(this.message="You must has same browser.",!1)},prepareDataForSending:function(e){return{expires:e.expires,id:e.id,signature:e.signature}},onVerifyEmail:function(){var e=this;if(this.validateQueryData(this.$route.query)&&this.validateCurrentUser(this.$store.getters["user/USER"],this.$store.getters["user/TOKEN"],this.$route.query)){var t=this.prepareDataForSending(this.$route.query);this.$store.dispatch("user/VERIFY_USER_EMAIL",t).then((function(t){e.message=t.message,e.$store.dispatch("user/LOAD_USER",{id:e.$store.getters["user/TOKEN"].doctor_id,token:e.$store.getters["user/TOKEN"].access_token})})).catch((function(t){e.message=t.message}))}}}},o=r(2),c={beforeCreate:function(){var e=this;setTimeout((function(){e.$store.dispatch("user/AUTOLOGIN_USER",{token:e.$store.getters["user/TOKEN"],user:e.$store.getters["user/USER"]})}),0)},components:{VerifyEmail:Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"verify-email"},[r("h1",[e._v("Verify Email")]),e._v(" "),r("p",[e._v(e._s(e.message))]),e._v(" "),r("p",[r("NuxtLink",{staticClass:"link link--button link--button-blue",attrs:{to:e.$routes.home.path,exact:""}},[e._v("Back to Home Page")])],1)])}),[],!1,null,null,null).exports}},l=Object(o.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page"},[t("div",{staticClass:"section"},[t("div",{staticClass:"container"},[t("VerifyEmail")],1)])])}),[],!1,null,null,null);t.default=l.exports}}]);